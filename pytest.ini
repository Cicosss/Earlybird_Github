[pytest]
# EarlyBird Test Configuration V2.0

# ============================================
# CUSTOM MARKERS FOR TEST CATEGORIZATION
# ============================================
markers =
    unit: Unit tests (fast, isolated, no external dependencies)
    integration: Integration tests (may require external services like APIs)
    regression: Regression tests (verify bug fixes and prevent regressions)
    contract: Contract tests (verify component interfaces and data structures)
    snapshot: Snapshot tests (detect output changes over time)
    chaos: Chaos tests (fault injection, resilience testing)
    slow: Slow tests (API calls, heavy computation, long-running)
    e2e: End-to-end tests (full system flow)
    performance: Performance and load tests
    security: Security-related tests

# ============================================
# DEFAULT OPTIONS
# ============================================
addopts = 
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    -ra

# ============================================
# TEST DISCOVERY
# ============================================
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# ============================================
# ASYNC TESTING
# ============================================
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# ============================================
# COVERAGE (optional - enable with --cov)
# ============================================
# addopts = --cov=src --cov-report=term-missing --cov-report=html

# ============================================
# FILTER WARNINGS
# ============================================
filterwarnings =
    ignore::DeprecationWarning:telethon.*
    ignore::UserWarning:playwright.*
    ignore::RuntimeWarning:asyncio.*

# ============================================
# LOGGING
# ============================================
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)
log_cli_date_format = %Y-%m-%d %H:%M:%S

# ============================================
# TIMEOUTS (requires pytest-timeout)
# ============================================
timeout = 300  # 5 minutes default timeout for tests

# ============================================
# XDIST (parallel execution - requires pytest-xdist)
# ============================================
# addopts = -n auto  # Run tests in parallel using all CPU cores
